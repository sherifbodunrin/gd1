
console.log(`Boss ${index + 1} is shooting`);

        const bullet = new Konva.Circle({
            x: boss.node.x() + boss.node.width() / 2,
            y: boss.node.y() + boss.node.height(),
            radius: 5,
            fill: 'red'
        });
        layer.add(bullet);

        let angle = Math.PI / 2; // Default shooting angle (straight down)

        // Boss-specific shooting behavior
        if (index === 0) {
            // Boss 1 shoots directly at the player
            const dx = player.x() + player.width() / 2 - bullet.x();
            const dy = player.y() - bullet.y();
            angle = Math.atan2(dy, dx);
        } else if (index === 1) {
            // Boss 2 spreads bullets randomly within an angle spread
            const spread = Math.PI / 8;
            angle = Math.random() * spread - spread / 2;
        } else if (index === 2) {
            // Boss 3 shoots in random directions
            angle = Math.random() * Math.PI * 2;
        }

        const bulletSpeed = 5;
        const anim = new Konva.Animation(() => {
            bullet.x(bullet.x() + Math.cos(angle) * bulletSpeed);
            bullet.y(bullet.y() + Math.sin(angle) * bulletSpeed);

            // Check for collision with the player
            if (
                bullet.y() < player.y() + player.height() &&
                bullet.y() > player.y() &&
                bullet.x() > player.x() &&
                bullet.x() < player.x() + player.width()
            ) {
                updatePlayerHp(10);
                bullet.destroy();
        // Create the bullet image
        const bulletImageObj = new Image();
        bulletImageObj.src = 'https://img.itch.zone/aW1nLzE2Nzc1NTM1LmdpZg==/315x250%23cm/PYelHk.gif'; // Use the provided gif as the bullet image

        bulletImageObj.onload = function() {
            const bullet = new Konva.Image({
                x: boss.node.x() + boss.node.width() / 2,
                y: boss.node.y() + boss.node.height(),
                image: bulletImageObj,
                width: 25,  // Set bullet width as per your preference
                height: 25  // Set bullet height as per your preference
            });
            layer.add(bullet);

            let angle = Math.PI / 2; // Default shooting angle (straight down)

            // Boss-specific shooting behavior
            if (index === 0) {
                // Boss 1 shoots directly at the player
                const dx = player.x() + player.width() / 2 - bullet.x();
                const dy = player.y() - bullet.y();
                angle = Math.atan2(dy, dx);
            } else if (index === 1) {
                // Boss 2 spreads bullets randomly within an angle spread
                const spread = Math.PI / 8;
                angle = Math.random() * spread - spread / 2;
            } else if (index === 2) {
                // Boss 3 shoots in random directions
                angle = Math.random() * Math.PI * 2;
}

            // Destroy bullet if it goes off-screen
            if (bullet.y() < 0 || bullet.y() > stage.height() || bullet.x() < 0 || bullet.x() > stage.width()) {
                bullet.destroy();
            }
        }, layer);
        anim.start();
            const bulletSpeed = 5;
            const anim = new Konva.Animation(() => {
                bullet.x(bullet.x() + Math.cos(angle) * bulletSpeed);
                bullet.y(bullet.y() + Math.sin(angle) * bulletSpeed);

                // Check for collision with the player
                if (
                    bullet.y() < player.y() + player.height() &&
                    bullet.y() > player.y() &&
                    bullet.x() > player.x() &&
                    bullet.x() < player.x() + player.width()
                ) {
                    updatePlayerHp(10);
                    bullet.destroy();
                }

                // Destroy bullet if it goes off-screen
                if (bullet.y() < 0 || bullet.y() > stage.height() || bullet.x() < 0 || bullet.x() > stage.width()) {
                    bullet.destroy();
                }
            }, layer);
            anim.start();
        };
}, Math.random() * 800 + 300); // Shoot every 300ms to 1100ms
}
